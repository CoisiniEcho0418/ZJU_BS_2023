{"version":3,"sources":["webpack:///./src/params/EditUserInfoRequest.js","webpack:///src/view/user.vue","webpack:///./src/view/user.vue?5581","webpack:///./src/view/user.vue","webpack:///./src/params/EditPasswordRequest","webpack:///./node_modules/babel-runtime/helpers/classCallCheck.js","webpack:///./src/assets/img/avatar.jpg"],"names":["EditUserInfoRequest","userId","newUsername","newEmail","newPhone","classCallCheck_default","this","user_id","new_username","new_email","new_phone","user","components","props","data","editUserInfoDialog","editUserInfoForm","editUserInfoRule","min","message","trigger","type","pattern","editPasswordDialog","editPasswordForm","oldPassword","newPassword","confirmPassword","editPasswordRule","required","watch","computed","extends_default","Object","vuex_esm","methods","closeEditUserInfo","$refs","resetFields","getUserInfo","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","response","res","userData","wrap","_context","prev","next","axiosConfig","get","params","$store","state","sent","console","log","success","token","email","phone","username","changeLogin","$message","error","t0","stop","editUserInfo","_ref","_this2","validate","_callee2","valid","editUserInfoRequest","_ref2","_context2","abrupt","params_EditUserInfoRequest","trim","post","msg","_x","apply","arguments","editPassword","_ref3","_this3","_callee3","editPasswordRequest","_ref4","_context3","EditPasswordRequest","commit","sessionStorage","clear","$router","push","_x2","closeEditPassword","created","mounted","view_user","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","size","src","on","errorHandler","__webpack_require__","_v","staticStyle","margin-bottom","font-weight","font-size","_s","color","margin-top","direction","column","border","slot","letter-spacing","text-align","width","margin-right","nativeOn","click","$event","title","visible","center","before-close","close-on-click-modal","update:visible","ref","rules","model","label-width","label","prop","placeholder","value","callback","$$v","$set","expression","show-password","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__","[object Object]","exports","__esModule","default","instance","Constructor","TypeError","module","p"],"mappings":"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","file":"static/js/2.132a084fbcc1c1755d3a.js","sourcesContent":["// EditUserInfoRequest.js\r\nexport default class EditUserInfoRequest {\r\n  constructor(userId, newUsername, newEmail, newPhone) {\r\n    this.user_id = userId;\r\n    this.new_username = newUsername;\r\n    this.new_email = newEmail;\r\n    this.new_phone = newPhone;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/params/EditUserInfoRequest.js","<template>\r\n  <div>\r\n    <el-card class=\"user_info_card\">\r\n      <!-- 头部区域 -->\r\n      <div class=\"user_header\">\r\n        <!-- 头像区域 -->\r\n        <el-avatar :size=\"60\"\r\n                   src=\"../assets//img/avatar.jpg\"\r\n                   @error=\"errorHandler\">\r\n          <img src=\"../assets/img/avatar.jpg\" />\r\n        </el-avatar>\r\n        <!-- 用户简略信息区域 -->\r\n        <div class=\"header_info\">\r\n          <!-- 用户名  -->\r\n          <div style=\"margin-bottom: 10px;font-weight: bold;font-size: 18px;\">{{username}}</div>\r\n          <!-- 邮箱  -->\r\n          <div style=\"color: gray;font-size: 14px;\">{{ email }}</div>\r\n        </div>\r\n      </div>\r\n      <!-- 用户详情区域 -->\r\n      <el-descriptions direction=\"vertical\"\r\n                       :column=\"2\"\r\n                       style=\"margin-top: 20px;\"\r\n                       border>\r\n        <el-descriptions-item>\r\n          <template slot=\"label\">\r\n            <i class=\"el-icon-user\"></i>\r\n            用户名\r\n          </template>\r\n          {{username}}\r\n        </el-descriptions-item>\r\n        <el-descriptions-item>\r\n          <template slot=\"label\">\r\n            <i class=\"el-icon-mobile-phone\"></i>\r\n            绑定的手机号\r\n          </template>\r\n          {{phone}}\r\n        </el-descriptions-item>\r\n        <el-descriptions-item>\r\n          <template slot=\"label\">\r\n            <i class=\"el-icon-message\"></i>\r\n            绑定的邮箱\r\n          </template>\r\n          {{ email }}\r\n        </el-descriptions-item>\r\n      </el-descriptions>\r\n      <!-- 按钮区域 -->\r\n      <div class=\"button_block\">\r\n        <el-button type=\"primary\"\r\n                   style=\"letter-spacing: 1px;text-align: center;width: 12%;margin-right: 20px;\"\r\n                   @click.native=\"editUserInfoDialog=true\">编辑个人信息</el-button>\r\n        <el-button type=\"success\"\r\n                   style=\"margin-right: 10px;letter-spacing: 1px;text-align: center;width: 12%;\"\r\n                   @click.native=\"editPasswordDialog=true\">修改密码</el-button>\r\n      </div>\r\n      <!-- 编辑个人信息 dialog -->\r\n      <el-dialog title=\"编辑个人信息\"\r\n                 :visible.sync=\"editUserInfoDialog\"\r\n                 width=\"30%\"\r\n                 center\r\n                 :before-close=\"closeEditUserInfo\"\r\n                 :close-on-click-modal=\"false\">\r\n        <el-form ref=\"editUserInfoForm\"\r\n                 :rules=\"editUserInfoRule\"\r\n                 class=\"demo-form-inline\"\r\n                 :model=\"editUserInfoForm\"\r\n                 label-width=\"90px\">\r\n          <el-form-item label=\"新用户名:\"\r\n                        prop=\"new_username\">\r\n            <el-input v-model=\"editUserInfoForm.new_username\"\r\n                      placeholder=\"请输入新用户名\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"新邮箱:\"\r\n                        prop=\"new_email\">\r\n            <el-input v-model=\"editUserInfoForm.new_email\"\r\n                      placeholder=\"请输入新邮箱\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"新手机号:\"\r\n                        prop=\"new_phone\">\r\n            <el-input v-model=\"editUserInfoForm.new_phone\"\r\n                      placeholder=\"请输入新手机号\" />\r\n          </el-form-item>\r\n          <el-form-item class=\"dialog_button\"\r\n                        label-width=\"0px\">\r\n            <el-button type=\"primary\"\r\n                       @click=\"editUserInfo()\">保 存</el-button>\r\n            <el-button style=\"margin-right: 10px;\"\r\n                       @click=\"closeEditUserInfo()\">取 消</el-button>\r\n\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-dialog>\r\n      <!-- 修改密码 dialog -->\r\n      <el-dialog title=\"修改密码\"\r\n                 :visible.sync=\"editPasswordDialog\"\r\n                 width=\"30%\"\r\n                 center\r\n                 :before-close=\"closeEditPassword\"\r\n                 :close-on-click-modal=\"false\">\r\n        <el-form ref=\"editPasswordForm\"\r\n                 :rules=\"editPasswordRule\"\r\n                 class=\"demo-form-inline\"\r\n                 :model=\"editPasswordForm\"\r\n                 label-width=\"90px\">\r\n          <el-form-item label=\"原密码:\"\r\n                        prop=\"oldPassword\">\r\n            <el-input v-model=\"editPasswordForm.oldPassword\"\r\n                      show-password\r\n                      placeholder=\"请输入原密码\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"新密码:\"\r\n                        prop=\"newPassword\">\r\n            <el-input v-model=\"editPasswordForm.newPassword\"\r\n                      show-password\r\n                      placeholder=\"请输入新密码\" />\r\n          </el-form-item>\r\n          <el-form-item label=\"确认密码:\"\r\n                        prop=\"confirmPassword\">\r\n            <el-input v-model=\"editPasswordForm.confirmPassword\"\r\n                      show-password\r\n                      placeholder=\"请确认密码\" />\r\n          </el-form-item>\r\n          <el-form-item class=\"dialog_button\"\r\n                        label-width=\"0px\">\r\n            <el-button type=\"primary\"\r\n                       @click=\"editPassword()\">保 存</el-button>\r\n            <el-button style=\"margin-right: 10px;\"\r\n                       @click=\"closeEditPassword()\">取 消</el-button>\r\n\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-dialog>\r\n\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport EditPasswordRequest from \"../params/EditPasswordRequest\" // 引入修改密码请求参数实例\r\nimport EditUserInfoRequest from \"../params/EditUserInfoRequest\"; // 引入编辑个人信息请求参数实例\r\nimport axios from '../util/axiosConfig'; // 引入axios实例\r\nimport { mapState, mapMutations } from \"vuex\";\r\n\r\n\r\nexport default {\r\n  components: {},\r\n  props: {},\r\n  data () {\r\n    return {\r\n      // 编辑个人信息dialog的开关\r\n      editUserInfoDialog: false,\r\n      // 编辑个人信息的表单\r\n      editUserInfoForm: {\r\n        new_username: \"\",\r\n        new_email: \"\",\r\n        new_phone: \"\"\r\n      },\r\n      // 编辑个人信息表单的校验规则  TODO: 邮箱和手机号校验规则待更进\r\n      editUserInfoRule: {\r\n        new_username: [\r\n          { min: 2, message: '用户名至少2个字符', trigger: 'blur' },\r\n        ],\r\n        new_email: [\r\n          { type: 'email', message: '请输入有效的邮箱地址', trigger: 'blur' }\r\n        ],\r\n        new_phone: [\r\n          { pattern: /^1[0-9]{10}$/, message: '请输入有效的手机号(1开头的11位手机号)', trigger: 'blur' }\r\n        ]\r\n      },\r\n      // 用于控制修改密码dialog的打开与否\r\n      editPasswordDialog: false,\r\n      editPasswordForm: {\r\n        oldPassword: \"\",\r\n        newPassword: \"\",\r\n        confirmPassword: \"\",\r\n      },\r\n      editPasswordRule: {\r\n        oldPassword: [\r\n          { required: true, message: \"请输入原密码\", trigger: \"blur\" },\r\n        ],\r\n        newPassword: [\r\n          { required: true, message: \"请输入新密码\", trigger: \"blur\" },\r\n        ],\r\n        confirmPassword: [\r\n          { required: true, message: \"请确认新密码\", trigger: \"blur\" },\r\n        ],\r\n      },\r\n\r\n\r\n    };\r\n  },\r\n  watch: {},\r\n  computed: {\r\n    ...mapState([\"username\", \"email\", \"phone\"]),\r\n  },\r\n  methods: {\r\n    ...mapMutations(['changeLogin']),\r\n    // 取消编辑个人信息\r\n    closeEditUserInfo () {\r\n      this.editUserInfoDialog = false;\r\n      // resetFields 方法只能重置带有 props 属性的元素\r\n      this.$refs.editUserInfoForm.resetFields();\r\n    },\r\n    // 重新获取用户个人信息\r\n    async getUserInfo () {\r\n      try {\r\n        const response = await axios.get(\"/user/getUserInfo\", {\r\n          params: {\r\n            user_id: this.$store.state.userId,\r\n          },\r\n        });\r\n\r\n        const { data: res } = response;\r\n        console.log(res)\r\n        if (res.success) {\r\n          // 更新 Vuex 中的用户信息\r\n          const userData = {\r\n            token: res.data.token,\r\n            email: res.data.email,\r\n            phone: res.data.phone,\r\n            userId: res.data.userId,\r\n            username: res.data.username,\r\n          };\r\n          console.log(userData)\r\n          // 将用户信息保存到 Vuex 中\r\n          this.changeLogin(userData);\r\n        } else {\r\n          this.$message.error(res.message);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"请求失败:\", error);\r\n        this.$message.error(\"服务器连接失败，请稍后重试...\");\r\n      }\r\n    },\r\n    // 编辑个人信息处理函数\r\n    editUserInfo () {\r\n      this.$refs.editUserInfoForm.validate(async (valid) => {\r\n        if (!valid) {\r\n          console.log('error submit!!');\r\n          this.$message.error(\"表单内容不符合规范！\");\r\n          return false;\r\n        }\r\n        // 构造请求参数\r\n        const editUserInfoRequest = new EditUserInfoRequest(\r\n          this.$store.state.userId, // 从vuex获取userId\r\n          // 使用 trim() 删除前后空格，避免将空字符串传递给后端\r\n          this.editUserInfoForm.new_username.trim() || null,\r\n          this.editUserInfoForm.new_email.trim() || null,\r\n          this.editUserInfoForm.new_phone.trim() || null\r\n        );\r\n        console.log(editUserInfoRequest);\r\n\r\n        try {\r\n          // 发送编辑个人信息请求\r\n          const { data: res } = await axios.post(\r\n            \"/user/editUserInfo\",\r\n            editUserInfoRequest\r\n          );\r\n          console.log(res)\r\n          if (res.success) {\r\n            this.$message.success(\"个人信息修改成功！\");\r\n            // 重新获取用户个人信息\r\n            this.getUserInfo();\r\n            this.closeEditUserInfo();\r\n          } else {\r\n            this.$message.error(res.msg);\r\n          }\r\n        } catch (error) {\r\n          console.error(\"请求失败:\", error);\r\n          this.$message.error(\"服务器连接失败，请稍后重试...\");\r\n        }\r\n      });\r\n    },\r\n    // 修改密码\r\n    editPassword () {\r\n      this.$refs.editPasswordForm.validate(async (valid) => {\r\n        if (!valid) {\r\n          console.log('error submit!!');\r\n          this.$message.error(\"表单内容不符合规范！\");\r\n          return false;\r\n        }\r\n        if (this.editPasswordForm.newPassword != this.editPasswordForm.confirmPassword) {\r\n          return this.$message.error(\"两次密码不正确，请重新输入！\");\r\n        }\r\n\r\n        // 创建 EditPasswordRequest 对象\r\n        const editPasswordRequest = new EditPasswordRequest(\r\n          this.$store.state.username, // 从vuex获取username\r\n          this.editPasswordForm.oldPassword,\r\n          this.editPasswordForm.newPassword\r\n        );\r\n        console.log(editPasswordRequest)\r\n        try {\r\n          // 请求接口\r\n          const { data: res } = await axios.post(\r\n            \"/user/updatePassword\",\r\n            editPasswordRequest\r\n          );\r\n          console.log(res)\r\n          if (res.success) {\r\n            this.$message.success(\"密码修改成功，请重新登录！\");\r\n            // 清除 Vuex 中的用户信息\r\n            this.$store.commit(\"logout\");\r\n            sessionStorage.clear();\r\n            this.$router.push(\"/login\");\r\n          } else {\r\n            return this.$message.error(res.msg);\r\n          }\r\n        } catch (error) {\r\n          console.error(\"请求失败:\", error);\r\n          this.$message.error(\"服务器连接失败，请稍后重试...\");\r\n        }\r\n      });\r\n    },\r\n    // 取消关闭密码\r\n    closeEditPassword () {\r\n      this.editPasswordDialog = false;\r\n      // Tips: resetFields 方法只能重置带有 props 属性的元素\r\n      this.$refs.editPasswordForm.resetFields();\r\n    },\r\n\r\n\r\n  },\r\n  created () { },\r\n  mounted () { }\r\n};\r\n</script>\r\n<style scoped>\r\n.user_info_card {\r\n  margin: 20px 0;\r\n}\r\n.user_header {\r\n  padding: 10px 10px;\r\n  padding-left: 20px;\r\n  display: flex;\r\n  flex-direction: row;\r\n  border-bottom: 2px solid #ebeef5;\r\n}\r\n.header_info {\r\n  margin-left: 15px;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.button_block {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin-top: 30px;\r\n}\r\n.dialog_button {\r\n  margin-top: 30px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/view/user.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-card',{staticClass:\"user_info_card\"},[_c('div',{staticClass:\"user_header\"},[_c('el-avatar',{attrs:{\"size\":60,\"src\":\"../assets//img/avatar.jpg\"},on:{\"error\":_vm.errorHandler}},[_c('img',{attrs:{\"src\":require(\"../assets/img/avatar.jpg\")}})]),_vm._v(\" \"),_c('div',{staticClass:\"header_info\"},[_c('div',{staticStyle:{\"margin-bottom\":\"10px\",\"font-weight\":\"bold\",\"font-size\":\"18px\"}},[_vm._v(_vm._s(_vm.username))]),_vm._v(\" \"),_c('div',{staticStyle:{\"color\":\"gray\",\"font-size\":\"14px\"}},[_vm._v(_vm._s(_vm.email))])])],1),_vm._v(\" \"),_c('el-descriptions',{staticStyle:{\"margin-top\":\"20px\"},attrs:{\"direction\":\"vertical\",\"column\":2,\"border\":\"\"}},[_c('el-descriptions-item',[_c('template',{slot:\"label\"},[_c('i',{staticClass:\"el-icon-user\"}),_vm._v(\"\\n          用户名\\n        \")]),_vm._v(\"\\n        \"+_vm._s(_vm.username)+\"\\n      \")],2),_vm._v(\" \"),_c('el-descriptions-item',[_c('template',{slot:\"label\"},[_c('i',{staticClass:\"el-icon-mobile-phone\"}),_vm._v(\"\\n          绑定的手机号\\n        \")]),_vm._v(\"\\n        \"+_vm._s(_vm.phone)+\"\\n      \")],2),_vm._v(\" \"),_c('el-descriptions-item',[_c('template',{slot:\"label\"},[_c('i',{staticClass:\"el-icon-message\"}),_vm._v(\"\\n          绑定的邮箱\\n        \")]),_vm._v(\"\\n        \"+_vm._s(_vm.email)+\"\\n      \")],2)],1),_vm._v(\" \"),_c('div',{staticClass:\"button_block\"},[_c('el-button',{staticStyle:{\"letter-spacing\":\"1px\",\"text-align\":\"center\",\"width\":\"12%\",\"margin-right\":\"20px\"},attrs:{\"type\":\"primary\"},nativeOn:{\"click\":function($event){_vm.editUserInfoDialog=true}}},[_vm._v(\"编辑个人信息\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-right\":\"10px\",\"letter-spacing\":\"1px\",\"text-align\":\"center\",\"width\":\"12%\"},attrs:{\"type\":\"success\"},nativeOn:{\"click\":function($event){_vm.editPasswordDialog=true}}},[_vm._v(\"修改密码\")])],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"编辑个人信息\",\"visible\":_vm.editUserInfoDialog,\"width\":\"30%\",\"center\":\"\",\"before-close\":_vm.closeEditUserInfo,\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.editUserInfoDialog=$event}}},[_c('el-form',{ref:\"editUserInfoForm\",staticClass:\"demo-form-inline\",attrs:{\"rules\":_vm.editUserInfoRule,\"model\":_vm.editUserInfoForm,\"label-width\":\"90px\"}},[_c('el-form-item',{attrs:{\"label\":\"新用户名:\",\"prop\":\"new_username\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入新用户名\"},model:{value:(_vm.editUserInfoForm.new_username),callback:function ($$v) {_vm.$set(_vm.editUserInfoForm, \"new_username\", $$v)},expression:\"editUserInfoForm.new_username\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"新邮箱:\",\"prop\":\"new_email\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入新邮箱\"},model:{value:(_vm.editUserInfoForm.new_email),callback:function ($$v) {_vm.$set(_vm.editUserInfoForm, \"new_email\", $$v)},expression:\"editUserInfoForm.new_email\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"新手机号:\",\"prop\":\"new_phone\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入新手机号\"},model:{value:(_vm.editUserInfoForm.new_phone),callback:function ($$v) {_vm.$set(_vm.editUserInfoForm, \"new_phone\", $$v)},expression:\"editUserInfoForm.new_phone\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"dialog_button\",attrs:{\"label-width\":\"0px\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.editUserInfo()}}},[_vm._v(\"保 存\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-right\":\"10px\"},on:{\"click\":function($event){return _vm.closeEditUserInfo()}}},[_vm._v(\"取 消\")])],1)],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"修改密码\",\"visible\":_vm.editPasswordDialog,\"width\":\"30%\",\"center\":\"\",\"before-close\":_vm.closeEditPassword,\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.editPasswordDialog=$event}}},[_c('el-form',{ref:\"editPasswordForm\",staticClass:\"demo-form-inline\",attrs:{\"rules\":_vm.editPasswordRule,\"model\":_vm.editPasswordForm,\"label-width\":\"90px\"}},[_c('el-form-item',{attrs:{\"label\":\"原密码:\",\"prop\":\"oldPassword\"}},[_c('el-input',{attrs:{\"show-password\":\"\",\"placeholder\":\"请输入原密码\"},model:{value:(_vm.editPasswordForm.oldPassword),callback:function ($$v) {_vm.$set(_vm.editPasswordForm, \"oldPassword\", $$v)},expression:\"editPasswordForm.oldPassword\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"新密码:\",\"prop\":\"newPassword\"}},[_c('el-input',{attrs:{\"show-password\":\"\",\"placeholder\":\"请输入新密码\"},model:{value:(_vm.editPasswordForm.newPassword),callback:function ($$v) {_vm.$set(_vm.editPasswordForm, \"newPassword\", $$v)},expression:\"editPasswordForm.newPassword\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"确认密码:\",\"prop\":\"confirmPassword\"}},[_c('el-input',{attrs:{\"show-password\":\"\",\"placeholder\":\"请确认密码\"},model:{value:(_vm.editPasswordForm.confirmPassword),callback:function ($$v) {_vm.$set(_vm.editPasswordForm, \"confirmPassword\", $$v)},expression:\"editPasswordForm.confirmPassword\"}})],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"dialog_button\",attrs:{\"label-width\":\"0px\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.editPassword()}}},[_vm._v(\"保 存\")]),_vm._v(\" \"),_c('el-button',{staticStyle:{\"margin-right\":\"10px\"},on:{\"click\":function($event){return _vm.closeEditPassword()}}},[_vm._v(\"取 消\")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-04981a0a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/user.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-04981a0a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./user.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./user.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./user.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-04981a0a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./user.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-04981a0a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/user.vue\n// module id = null\n// module chunks = ","class EditPasswordRequest {\r\n  constructor(username, oldPassword, newPassword) {\r\n    // 成员变量会在构造函数中动态创建\r\n    this.username = username;\r\n    this.oldPassword = oldPassword;\r\n    this.newPassword = newPassword;\r\n  }\r\n}\r\n\r\nexport default EditPasswordRequest;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/params/EditPasswordRequest\n// module id = PK7p\n// module chunks = 1 2","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/classCallCheck.js\n// module id = Zrlr\n// module chunks = 2 4","module.exports = __webpack_public_path__ + \"static/img/avatar.11376b3.jpg\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/img/avatar.jpg\n// module id = jpVj\n// module chunks = 1 2"],"sourceRoot":""}